---
name: Expo GitHub Action - Preview
author: Expo
description: Create Expo previews on pull requests using EAS Update
branding:
  icon: smartphone
  color: gray-dark
runs:
  using: node16
  main: ../build/preview/index.js
inputs:
  command:
    description: The EAS Update command to execute
    required: true
  comment:
    description: If the action should create comments on PRs
    required: false
    default: true
  comment-id:
    description: The unique comment ID template to reuse existing comments on PRs
  working-directory:
    description: Path to the Expo project, relative from the repository root
    required: false
    default: ${{ github.workspace }}
  github-token:
    description: GitHub access token to create comment on PRs
    required: false
    default: ${{ github.token }}
outputs:
  projectId:
    description: EAS project ID from the `app.json` `extra.eas.projectId` section
  projectName:
    description: The resolved project name
  projectSlug:
    description: The resolved project slug

  groupId:
    description: The shared update group id, when runtime versions are equal for both platforms.
  runtimeVersion:
    description: The shared runtime version, when they are equal for both platforms.
  qr:
    description: The shared QR code url, when runtime versions are equal for both platforms.
  branchName:
    description: The branch name where this update was created on.
  message:
    description: The description of the update that was created.
  createdAt:
    description: The date of when the update was created.
  gitCommitHash:
    description: The git commit hash that was used when creating the update

  androidId:
    description: The update id created for Android
  androidGroupId:
    description: The update group id created for Android
  androidBranchName:
    description: The branch name where this update was created on.
  androidMessage:
    description: The description of the update that was created.
  androidRuntimeVersion:
    description: The EAS Update runtimeVersion created for Android
  androidQR:
    description: The EAS Update QR code to open the update on Android

  iosId:
    description: The update id created for iOS
  iosGroupId:
    description: The update group id created for iOS
  iosBranchName:
    description: The branch name where this update was created on.
  iosMessage:
    description: The description of the update that was created.
  iosRuntimeVersion:
    description: The EAS Update runtimeVersion created for iOS
  iosQR:
    description: The EAS Update QR code to open the update on iOS

  commentId:
    description: The resolved comment id
  comment:
    description: The resolved comment content
